class Solution {
    public int solution(int n, int[] tops) {
        int[] a = new int[n+1];
        int[] b = new int[n+1];
        
        a[0] = 1;
        b[0] = 1;
        
        for (int i = 1; i <= n; i++) {
            if (tops[i-1] == 1) {
                a[i] = (a[i - 1] + 2 * b[i - 1]) % 10007;
                b[i] = (3 * b[i - 1] + a[i - 1]) % 10007;
            } else {
                a[i] = (a[i - 1] + b[i - 1]) % 10007;
                b[i] = (2 * b[i - 1] + a[i - 1]) % 10007;
            }
        }
        return b[n] % 10007;
    }
}
// [0,2,0] = 2 * [1,2,0] + [1,2,-1] = 2 * (3 * [2,2,0] + 2,2,-1) = 8 + 2 * 
// 위에 값이 있으면
// a[n] = a[n-1] + 2 * b[n-1]
// b[n] = 3 * b[n-1] + a[n-1]
//위에 값이 없으면
//a[n] = a[n-1] + b[n-1]
//b[n] = 2 * b[n-1] + a[n-1]

// b[5] = 3 * b[4] + a[4] = 11 * b[3] + 4 * a[3] = 26 * b[2] + 15 * a[2]
// b[4] = 3 * b[3] + a[3]
// a[4] = a[3] + 2 * b[3]

// b[3] = 2 * b[2] + a[2]
// a[3] = a[2] + b[2]

// b[2] = 3 * b[1] + a[1] = 78, 26
// a[2] = 2 * b[1] + a[1] = 30, 15
    
//     108 + 41